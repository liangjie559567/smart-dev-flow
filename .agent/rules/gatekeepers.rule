---
description: 核心门禁规则（Axiom v4.2）
---
# 门禁规则

## Gate 1：需求澄清门禁
- **触发**：Phase 1 需求澄清完成
- **通过条件**：验收标准已定义且可测试、接口契约已定义、无循环依赖
- **失败**：退回 1-drafting.md 重新澄清

## Gate 2：专家评审门禁
- **触发**：Phase 1.5 评审完成
- **通过条件**：综合评分 ≥ 60、无 Critical 问题
- **失败**：评分 < 60 强制退回；有 Critical 问题强制退回

## Gate 3：Manifest 确认门禁
- **触发**：Phase 2 任务拆解完成
- **通过条件**：用户明确确认、任务粒度合理（每任务 < 2小时）
- **失败**：用户拒绝 → 停止；任务粒度不合理 → 重新拆解

## Gate 4：实现完成门禁
- **触发**：Phase 3 所有子任务完成
- **通过条件**：测试全部通过、构建无错误、验收标准逐条核对通过
- **失败**：任一失败 → 派发 executor 修复后重新验证

## Gate 5：代码质量门禁（四层检查）
- **触发**：每个 executor 子代理完成后
- **层次**：质量检查 → 安全检查 → 接口契约检查 → 风格检查
- **通过条件**：四层均无 Critical/High 问题
- **失败**：带问题列表重新调用 executor

## 连续失败熔断
- `fail_count >= 3` → `task_status: BLOCKED`
- 记录 `blocked_reason`，终止流程，等待人工介入
