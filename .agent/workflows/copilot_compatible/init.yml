name: "Initialization"
description: "äº¤äº’å¼åˆå§‹åŒ– Axiom ç¯å¢ƒé€‚é…å™¨"
steps:
  - name: "ç¯å¢ƒé—®è¯¢"
    type: "ask_user"
    save_as: "assistant_choice"
    message: "æ¬¢è¿ä½¿ç”¨ Axiom v4.2ï¼è¯·é€‰æ‹©æ‚¨çš„ AI åŠ©æ‰‹ï¼š\n1. GitHub Copilot\n2. Cursor AI\n3. Gemini CLI\n4. Axiom CLI"
    options: ["copilot", "cursor", "gemini_cli", "axiom_cli"]

  - name: "é£é™©ç¡®è®¤"
    type: "ask_user"
    save_as: "risk_confirmed"
    message: "å³å°†è¦†ç›–é…ç½®æ–‡ä»¶ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ(ç³»ç»Ÿå°†è‡ªåŠ¨åˆ›å»º .bak å¤‡ä»½)"
    options: ["yes", "no"]

  - name: "é…ç½®éƒ¨ç½²"
    type: "script"
    run: |
      project_root = git_root_or_cwd()
      if risk_confirmed != "yes":
        stop("ç”¨æˆ·å–æ¶ˆåˆå§‹åŒ–")
      if assistant_choice == "copilot":
        ensure_dir(f"{project_root}/.github")
        backup(f"{project_root}/.github/copilot-instructions.md")
        copy(f"{project_root}/.agent/adapters/copilot/copilot-instructions.md", f"{project_root}/.github/copilot-instructions.md")
      elif assistant_choice == "cursor":
        backup(f"{project_root}/.cursorrules")
        copy(f"{project_root}/.agent/adapters/cursor/.cursorrules", f"{project_root}/.cursorrules")
      elif assistant_choice == "gemini_cli":
        ensure_dir("~/.gemini")
        backup("~/.gemini/GEMINI.md")
        copy(f"{project_root}/.agent/adapters/gemini-cli/GEMINI-CLI.md", "~/.gemini/GEMINI.md")
      elif assistant_choice == "axiom_cli":
        note("Axiom CLI ä½¿ç”¨é¡¹ç›®å†… .agent è§„åˆ™ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚")

  - name: "æ–°æ‰‹å¼•å¯¼"
    type: "message"
    message: |
      âœ… åˆå§‹åŒ–å®Œæˆï¼
      è¯•ä¸€è¯•ï¼š
      - /draft [éœ€æ±‚]
      - /status
      ğŸ“– æ›´å¤šæ–‡æ¡£è§ README.md
