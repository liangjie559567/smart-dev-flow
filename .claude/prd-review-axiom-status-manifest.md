# PRD 评审报告：axiom-status 任务进度从 manifest.md 读取

**评审时间**：2026-02-21  
**评审角色**：产品经理  
**综合评分**：72/100

---

## 📊 维度评分

| 维度 | 评分 | 说明 |
|------|------|------|
| 产品价值 | 85/100 | 解决active_context.md不可靠问题，价值明确 |
| 用户故事 | 75/100 | 角色/需求/价值清晰，但缺少背景说明 |
| 验收标准 | 70/100 | 大部分可验证，但AC-3存在歧义 |
| 技术可行性 | 75/100 | 修改范围明确，但需要确认降级处理逻辑 |
| 优先级定义 | 60/100 | 未明确优先级，应为P1 |

---

## ✅ 优势

1. **单一事实来源**：从manifest.md读取而非依赖手动维护的active_context.md字段，降低数据不一致风险
2. **验收标准具体**：AC-1/AC-2明确定义统计方式（checkbox行数），AC-5确保进度条一致性
3. **技术约束合理**：仅修改第31-37行，不引入新依赖，改动最小化

---

## ⚠️ 关键问题（3条）

### 问题1：AC-3 歧义 — 降级显示范围不明确
**现象**：AC-3说"manifest.md 不存在时降级显示 `—/—`"，但未明确是指：
- (A) 进度条本身显示为"—/—"（如 `— —/— —`）
- (B) 仅数字部分显示为"—/—"（如 `░░░░░░░░░░ —/—`）

**影响**：现有代码第31-37行在manifest.md不存在时会显示"0/0 0%"，与AC-3要求不符。修改需要涉及进度条渲染逻辑，可能超出"仅修改第31-37行"的约束。

**建议**：
- 明确AC-3的降级显示格式（推荐选项A：完整降级为"— —/— —"）
- 确认修改范围是否需要扩展到进度条渲染部分

---

### 问题2：格式假设风险 — manifest.md 包含非checkbox内容
**现象**：AC-1/AC-2假设manifest.md只有"- [ ]"和"- [x]"格式，但实际文件包含：
- 表格行（`| T1 | ... |`）
- 标题行（`## 任务列表`）
- 其他markdown语法

**影响**：正则表达式`r'- \[[ x]\]'`可能误统计或遗漏，导致进度计算错误。

**建议**：
- 在AC-1/AC-2中明确checkbox的位置约束（如"仅统计## 任务列表下的checkbox行"）
- 提供正则表达式示例，确保实现者理解格式要求

---

### 问题3：优先级缺失 — 影响排期和资源分配
**现象**：PRD未明确优先级，无法判断是P0/P1/P2。

**影响**：
- 无法确定是否应该立即实现还是可以延后
- 无法与其他需求进行优先级对比

**建议**：
- 明确优先级（推荐P1：影响用户对系统状态的理解，但不阻塞核心功能）
- 说明优先级理由（如"active_context.md字段维护成本高，manifest.md更可靠"）

---

## 📋 用户故事完整性检查

| 检查项 | 状态 | 说明 |
|--------|------|------|
| 角色清晰 | ✅ | smart-dev-flow开发者 |
| 需求明确 | ✅ | 看到准确的任务完成进度 |
| 价值清晰 | ✅ | 快速了解会话推进情况 |
| 背景说明 | ❌ | 缺少"为什么现在需要"（触发点/背景） |
| 成功标准 | ✅ | AC-1~AC-5定义了验收标准 |

**建议**：在用户故事前添加背景说明，如：
> "当前active_context.md的total_tasks/completed_tasks字段需要手动维护，容易与manifest.md不同步。改为从manifest.md读取可以减少维护成本，提高数据准确性。"

---

## 🎯 决策建议

**当前状态**：**需要讨论后修改**

**建议行动**：
1. **澄清AC-3**：确认manifest.md不存在时的完整降级显示格式
2. **补充格式约束**：在AC-1/AC-2中明确checkbox的位置和格式要求
3. **补充优先级**：明确P0/P1/P2，并说明理由
4. **补充背景**：在用户故事中说明为什么现在需要这个改动

**修改后预期评分**：85-90/100

---

## 📝 验收标准改进建议

**AC-3 改进版本**：
```
AC-3: manifest.md 不存在或无有效checkbox行时，进度显示为"— —/— —"（进度条和数字均降级），不抛异常
```

**AC-1 改进版本**：
```
AC-1: 从 manifest.md 的"## 任务列表"章节下统计所有"- [ ]"和"- [x]"行，计为任务总数
```
