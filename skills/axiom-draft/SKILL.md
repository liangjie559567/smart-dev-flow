---
name: axiom-draft
description: Axiom Phase 1 èµ·è‰ - éœ€æ±‚æ¾„æ¸…ã€PRD ç”Ÿæˆã€æ¶æ„è®¾è®¡ï¼ˆå«å­ä»£ç†å¼ºåˆ¶è°ƒç”¨é“å¾‹ + çŸ¥è¯†åº“è´¯ç©¿ï¼‰
---

# axiom-draft

## å­ä»£ç†å¼ºåˆ¶è°ƒç”¨é“å¾‹

```
ä¸» Claude åªè´Ÿè´£ï¼šåè°ƒã€é—¨æ§ã€AskUserQuestionã€çŸ¥è¯†åº“æŸ¥è¯¢/æ²‰æ·€ã€äº¤äº’æ£€æŸ¥
ä¸» Claude ç¦æ­¢ï¼šç›´æ¥åˆ†æéœ€æ±‚ã€ç›´æ¥è®¾è®¡æ¶æ„ã€ç›´æ¥ç¼–å†™æ–‡æ¡£

æ¯ä¸ªé˜¶æ®µçš„æ ¸å¿ƒå·¥ä½œå¿…é¡»é€šè¿‡ Task() è°ƒç”¨å­ä»£ç†å®Œæˆã€‚
è¿åæ­¤è§„åˆ™ = æµç¨‹æ— æ•ˆï¼Œå¿…é¡»é‡æ–°æ‰§è¡Œè¯¥é˜¶æ®µã€‚
```

## é˜¶æ®µä¸Šä¸‹æ–‡å¯¹è±¡

æœ¬æŠ€èƒ½ç»“æŸæ—¶è¾“å‡ºä»¥ä¸‹ç»“æ„ï¼Œä¼ é€’ç»™ axiom-decomposeï¼š

```json
{
  "phase0": {
    "acceptance_criteria": [],
    "constraints": [],
    "risks": [],
    "requirements_doc": ""
  },
  "phase1": {
    "architecture": "",
    "interfaces": [],
    "adr": "",
    "design_doc": ""
  }
}
```

## æµç¨‹

### å‰ç½®ï¼šçŠ¶æ€æ£€æŸ¥ + çŸ¥è¯†åº“æŸ¥è¯¢

1. è¯»å– `.agent/memory/active_context.md`ï¼Œæ£€æŸ¥ `task_status`ï¼š
   - è‹¥çŠ¶æ€é `IDLE`ï¼Œæç¤ºç”¨æˆ·ï¼š"å½“å‰æœ‰è¿›è¡Œä¸­çš„ä»»åŠ¡ï¼ˆçŠ¶æ€ï¼š{task_status}ï¼‰ï¼Œç»§ç»­èµ·è‰å°†è¦†ç›–ç°æœ‰ä¸Šä¸‹æ–‡ã€‚ç¡®è®¤ç»§ç»­ï¼Ÿ"
   - ç”¨æˆ·ç¡®è®¤åç»§ç»­ï¼›å–æ¶ˆåˆ™ç»ˆæ­¢
2. æ‰§è¡Œ `.agent/workflows/1-drafting.md`
3. **çŸ¥è¯†åº“æŸ¥è¯¢ï¼ˆå¿…é¡»ï¼‰**ï¼š
   ```
   axiom_get_knowledge query="éœ€æ±‚æ¾„æ¸… {åŠŸèƒ½å…³é”®è¯}" limit=5
   axiom_search_by_tag tags=["éœ€æ±‚åˆ†æ", "éªŒæ”¶æ ‡å‡†"] limit=3
   â†’ å°†æŸ¥è¯¢ç»“æœä¿å­˜ä¸º kb_contextï¼Œæ³¨å…¥åç»­å­ä»£ç† prompt
   ```

### Phase 0ï¼šéœ€æ±‚æ¾„æ¸…

å‘ç”¨æˆ·æ”¶é›†éœ€æ±‚ä¿¡æ¯ï¼ˆè§"éœ€æ±‚æ”¶é›†"ï¼‰ï¼Œç„¶åï¼š

**æ­¥éª¤1ï¼šè°ƒç”¨ analyst å­ä»£ç†ï¼ˆå¿…é¡»ï¼Œç¦æ­¢ä¸» Claude ç›´æ¥åˆ†æï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="opus",
  prompt="ä½ æ˜¯éœ€æ±‚åˆ†æå¸ˆï¼ˆAnalystï¼‰ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†äº§å“éœ€æ±‚è½¬åŒ–ä¸ºå¯å®ç°çš„éªŒæ”¶æ ‡å‡†ï¼Œè¯†åˆ«éœ€æ±‚ç¼ºå£ã€‚
  ã€çŸ¥è¯†åº“ç»éªŒã€‘{kb_context}
  åˆ†æä»¥ä¸‹éœ€æ±‚ï¼Œæå–éªŒæ”¶æ ‡å‡†å’Œéšå«çº¦æŸï¼š{éœ€æ±‚æè¿°}
  è¾“å‡ºï¼š
  - ç”¨æˆ·æ•…äº‹ï¼ˆä½œä¸º...ï¼Œæˆ‘å¸Œæœ›...ï¼Œä»¥ä¾¿...ï¼‰
  - éªŒæ”¶æ ‡å‡†åˆ—è¡¨ï¼ˆå¯æµ‹è¯•çš„ pass/fail æ ‡å‡†ï¼‰
  - æŠ€æœ¯çº¦æŸ
  - æ’é™¤èŒƒå›´
  - æœªè§£å†³çš„ç–‘é—®"
)
```

**æ­¥éª¤2ï¼šè°ƒç”¨ writer å­ä»£ç†ç”Ÿæˆéœ€æ±‚æ–‡æ¡£ï¼ˆå¿…é¡»ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="haiku",
  prompt="ä½ æ˜¯æŠ€æœ¯æ–‡æ¡£æ’°å†™ä¸“å®¶ï¼ˆWriterï¼‰ã€‚
  ã€analystè¾“å‡ºã€‘{analystè¾“å‡º}
  ç¼–å†™éœ€æ±‚è§„æ ¼æ–‡æ¡£ï¼Œè¾“å‡ºï¼šdocs/requirements/YYYY-MM-DD-{feature}-requirements.md"
)
```

**æ­¥éª¤3ï¼šè°ƒç”¨ quality-reviewer å­ä»£ç†å®¡æŸ¥æ–‡æ¡£ï¼ˆå¿…é¡»ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="sonnet",
  prompt="ä½ æ˜¯ä»£ç è´¨é‡å®¡æŸ¥ä¸“å®¶ï¼ˆQuality Reviewerï¼‰ã€‚
  ã€å¾…å®¡æŸ¥æ–‡æ¡£ã€‘{writerè¾“å‡º}
  å®¡æŸ¥ï¼šå®Œæ•´æ€§ã€å¯æµ‹è¯•æ€§ã€æ— æ­§ä¹‰æ€§ï¼Œè¾“å‡ºé—®é¢˜åˆ—è¡¨"
)
```

**æ­¥éª¤4ï¼šä¸» Claude äº¤äº’æ£€æŸ¥**
- è‹¥ quality-reviewer å‘ç°**éœ€æ±‚æ­§ä¹‰/é€»è¾‘ç¼ºå£**ï¼ˆHigh/Criticalï¼‰â†’ é€€å› analyst é‡æ–°åˆ†æ â†’ analyst å®Œæˆåé‡æ–°è°ƒç”¨ writer â†’ **writer å®Œæˆåé‡æ–°è°ƒç”¨ quality-reviewer å®¡æŸ¥**ï¼Œå¾ªç¯ç›´åˆ°æ—  High/Critical
- è‹¥ quality-reviewer å‘ç°**æ–‡æ¡£æ ¼å¼/è¡¨è¾¾é—®é¢˜**ï¼ˆMedium/Lowï¼‰â†’ å¸¦é—®é¢˜åˆ—è¡¨é‡æ–°è°ƒç”¨ writer â†’ **writer å®Œæˆåé‡æ–°è°ƒç”¨ quality-reviewer å®¡æŸ¥**ï¼Œå¾ªç¯ç›´åˆ°å®¡æŸ¥æ— é—®é¢˜
- å…¨éƒ¨é€šè¿‡ â†’ å†™å…¥ phase0 ä¸Šä¸‹æ–‡ï¼Œè®°å½•æ–‡æ¡£è·¯å¾„

**çŸ¥è¯†æ²‰æ·€ï¼ˆå¿…é¡»ï¼‰**ï¼š
```
axiom_harvest source_type=conversation
  title="éœ€æ±‚æ¾„æ¸…: {åŠŸèƒ½åç§°}"
  summary="{æ ¸å¿ƒéœ€æ±‚} | {å…³é”®çº¦æŸ} | {éªŒæ”¶æ ‡å‡†} | {é£é™©ç‚¹}"
```

**ç¡¬é—¨æ§**ï¼š
- [ ] éªŒæ”¶æ ‡å‡†å·²å®šä¹‰ä¸”å¯æµ‹è¯•
- [ ] æŠ€æœ¯è¾¹ç•Œå·²æ˜ç¡®
- [ ] éœ€æ±‚æ–‡æ¡£å·²ç”Ÿæˆå¹¶é€šè¿‡å®¡æŸ¥ï¼š`docs/requirements/YYYY-MM-DD-{feature}-requirements.md`

> âš ï¸ **Phase 0 å®Œæˆåç¦æ­¢å‡ºç°ç¡®è®¤æ¡†**ã€‚å¿…é¡»ç›´æ¥ç»§ç»­æ‰§è¡Œ Phase 1 æ¶æ„è®¾è®¡ï¼Œç¡®è®¤æ¡†åªåœ¨ Phase 0+1 å…¨éƒ¨å®Œæˆåå‡ºç°ã€‚

### Phase 1ï¼šæ¶æ„è®¾è®¡

**çŸ¥è¯†åº“æŸ¥è¯¢ï¼ˆå¿…é¡»ï¼‰**ï¼š
```
axiom_get_knowledge query="æ¶æ„è®¾è®¡ {æŠ€æœ¯æ ˆå…³é”®è¯}" limit=5
axiom_search_by_tag tags=["æ¶æ„", "è®¾è®¡æ¨¡å¼"] limit=3
â†’ æ›´æ–° kb_context
```

**æ­¥éª¤1ï¼šè°ƒç”¨ architect å­ä»£ç†ï¼ˆå¿…é¡»ï¼Œç¦æ­¢ä¸» Claude ç›´æ¥è®¾è®¡ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="opus",
  prompt="ä½ æ˜¯ç³»ç»Ÿæ¶æ„å¸ˆï¼ˆArchitectï¼‰ã€‚
  ã€phase0ä¸Šä¸‹æ–‡ã€‘acceptance_criteria={phase0.acceptance_criteria} constraints={phase0.constraints}
  ã€çŸ¥è¯†åº“ç»éªŒã€‘{kb_context}
  è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼Œè¾“å‡ºï¼šæ¨¡å—åˆ’åˆ†ã€æ¥å£å¥‘çº¦ï¼ˆå«é”™è¯¯ç ï¼‰ã€ADR
  âš ï¸ æ¥å£å¥‘çº¦å¼ºåˆ¶è§„åˆ™ï¼ˆC-2ï¼‰ï¼šæ¯ä¸ªæ¥å£å¿…é¡»åŒ…å«å®Œæ•´çš„è¯·æ±‚/å“åº” JSON ç¤ºä¾‹ï¼Œåˆ—å‡ºæ‰€æœ‰å­—æ®µåã€ç±»å‹å’Œè¯´æ˜ï¼Œç¦æ­¢ä»…æè¿°å­—æ®µç”¨é€”è€Œä¸ç»™å‡ºå…·ä½“å­—æ®µå"
)
```

**æ­¥éª¤2ï¼šè°ƒç”¨ critic å­ä»£ç†æŒ‘æˆ˜æ–¹æ¡ˆï¼ˆå¿…é¡»ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="opus",
  prompt="ä½ æ˜¯æ‰¹åˆ¤æ€§å®¡æŸ¥ä¸“å®¶ï¼ˆCriticï¼‰ã€‚
  **å¿…é¡»å…ˆè¯»å–ä»¥ä¸‹æ–‡ä»¶ï¼Œå†è¿›è¡Œåˆ†æï¼Œç¦æ­¢åŸºäºå‡è®¾è¾“å‡ºç»“è®º**ï¼š
  - è¯»å– docs/design/YYYY-MM-DD-{feature}-design.mdï¼ˆè‹¥å·²å­˜åœ¨ï¼‰
  - è¯»å– docs/requirements/YYYY-MM-DD-{feature}-requirements.md
  ã€æ¶æ„æ–¹æ¡ˆã€‘{architectè¾“å‡º}
  ã€phase0çº¦æŸã€‘{phase0.constraints}
  è¯†åˆ«è®¾è®¡ç¼ºé™·ã€å¾ªç¯ä¾èµ–ã€è¿åçº¦æŸçš„é—®é¢˜ï¼Œè¾“å‡ºé—®é¢˜åˆ—è¡¨ï¼ˆæ¯æ¡é—®é¢˜å¿…é¡»å¼•ç”¨æ–‡ä»¶è¡Œå·ä½œä¸ºè¯æ®ï¼‰"
)
```

**æ­¥éª¤3ï¼šä¸» Claude äº¤äº’æ£€æŸ¥**
- æœ‰ Critical/High é—®é¢˜ â†’ å¸¦é—®é¢˜åˆ—è¡¨é‡æ–°è°ƒç”¨ architect â†’ **architect å®Œæˆåé‡æ–°è°ƒç”¨ critic å®¡æŸ¥**ï¼Œå¾ªç¯ç›´åˆ°æ—  Critical/High
- ç¡®è®¤æ— å¾ªç¯ä¾èµ–ã€æ¥å£å¥‘çº¦å«é”™è¯¯ç  â†’ å†™å…¥ phase1 ä¸Šä¸‹æ–‡

**æ­¥éª¤4ï¼šè°ƒç”¨ writer å­ä»£ç†ç”Ÿæˆè®¾è®¡æ–‡æ¡£ï¼ˆå¿…é¡»ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="haiku",
  prompt="ä½ æ˜¯æŠ€æœ¯æ–‡æ¡£æ’°å†™ä¸“å®¶ï¼ˆWriterï¼‰ã€‚
  ã€phase1ä¸Šä¸‹æ–‡ã€‘architecture={phase1.architecture} interfaces={phase1.interfaces} adr={phase1.adr}
  ç¼–å†™ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ï¼Œè¾“å‡ºï¼šdocs/design/YYYY-MM-DD-{feature}-design.md"
)
```

**æ­¥éª¤5ï¼šè°ƒç”¨ quality-reviewer å®¡æŸ¥è®¾è®¡æ–‡æ¡£ï¼ˆå¿…é¡»ï¼‰**
```
Task(
  subagent_type="general-purpose",
  model="sonnet",
  prompt="ä½ æ˜¯ä»£ç è´¨é‡å®¡æŸ¥ä¸“å®¶ï¼ˆQuality Reviewerï¼‰ã€‚
  ã€è®¾è®¡æ–‡æ¡£ã€‘{writerè¾“å‡º}
  ã€éœ€æ±‚æ–‡æ¡£è·¯å¾„ã€‘docs/requirements/YYYY-MM-DD-{feature}-requirements.md
  å®¡æŸ¥ï¼šå‡†ç¡®æ€§ã€å®Œæ•´æ€§ã€ä¸éœ€æ±‚ä¸€è‡´æ€§ï¼Œè¾“å‡ºé—®é¢˜åˆ—è¡¨"
)
```
- è‹¥ reviewer å‘ç°é—®é¢˜ â†’ å¸¦é—®é¢˜åˆ—è¡¨é‡æ–°è°ƒç”¨ writer â†’ **writer å®Œæˆåé‡æ–°è°ƒç”¨ quality-reviewer å®¡æŸ¥**ï¼Œå¾ªç¯ç›´åˆ°å®¡æŸ¥æ— é—®é¢˜
- å…¨éƒ¨é€šè¿‡ â†’ è®°å½•æ–‡æ¡£è·¯å¾„åˆ° phase1 ä¸Šä¸‹æ–‡

**çŸ¥è¯†æ²‰æ·€ï¼ˆå¿…é¡»ï¼‰**ï¼š
```
axiom_harvest source_type=code_change
  title="æ¶æ„è®¾è®¡: {åŠŸèƒ½åç§°}"
  summary="{æ¶æ„æ¨¡å¼} | {å…³é”®å†³ç­–ç†ç”±} | {æ¥å£å¥‘çº¦} | {å¯å¤ç”¨è®¾è®¡}"
```

**ç¡¬é—¨æ§**ï¼š
- [ ] æ¥å£å¥‘çº¦å·²å®šä¹‰ï¼ˆå«é”™è¯¯ç ï¼‰
- [ ] æ— å¾ªç¯ä¾èµ–
- [ ] critic å®¡æŸ¥é€šè¿‡ï¼ˆæ— é‡å¤§è®¾è®¡ç¼ºé™·ï¼‰
- [ ] è®¾è®¡æ–‡æ¡£å·²ç”Ÿæˆå¹¶é€šè¿‡å®¡æŸ¥ï¼š`docs/design/YYYY-MM-DD-{feature}-design.md`

## é˜¶æ®µå®Œæˆæ€»ç»“ï¼ˆå¿…é¡»è¾“å‡ºï¼‰

```
âœ… Phase 0+1 éœ€æ±‚æ¾„æ¸…ä¸æ¶æ„è®¾è®¡å®Œæˆ
- éªŒæ”¶æ ‡å‡†ï¼š{N} æ¡ï¼ˆå‡å¯æµ‹è¯•ï¼‰
- æŠ€æœ¯è¾¹ç•Œï¼šåŒ…å« {X}ï¼Œä¸åŒ…å« {Y}
- æ¥å£å¥‘çº¦ï¼š{N} ä¸ªæ¥å£å·²å®šä¹‰ï¼ˆå«é”™è¯¯ç ï¼‰
- ADRï¼š{å…³é”®æ¶æ„å†³ç­–}
- éœ€æ±‚æ–‡æ¡£ï¼šdocs/requirements/YYYY-MM-DD-{feature}-requirements.mdï¼ˆå·²å®¡æŸ¥é€šè¿‡ï¼‰
- è®¾è®¡æ–‡æ¡£ï¼šdocs/design/YYYY-MM-DD-{feature}-design.mdï¼ˆå·²å®¡æŸ¥é€šè¿‡ï¼‰
```

### ç¡®è®¤æµç¨‹

å±•ç¤º PRD è‰ç¨¿ + æ¶æ„è®¾è®¡åï¼Œé€šè¿‡ AskUserQuestion ç­‰å¾…ç”¨æˆ·ç¡®è®¤ï¼š

```
AskUserQuestion({
  question: "Phase 0+1 éœ€æ±‚æ¾„æ¸…ä¸æ¶æ„è®¾è®¡å·²å®Œæˆï¼Œå¦‚ä½•ç»§ç»­ï¼Ÿ",
  header: "Phase 1 â†’ Phase 1.5",
  options: [
    { label: "âœ… è¿›å…¥ Phase 1.5 ä¸“å®¶è¯„å®¡", description: "éœ€æ±‚å’Œæ¶æ„å·²å°±ç»ªï¼Œå¼€å§‹å¤šä¸“å®¶è¯„å®¡" },
    { label: "ğŸ“ éœ€è¦ä¿®æ”¹åå†è¿›å…¥", description: "éƒ¨åˆ†å†…å®¹éœ€è¦è°ƒæ•´" },
    { label: "ğŸ”„ è¿”å·¥éœ€æ±‚æ¾„æ¸…", description: "é‡æ–°æ¾„æ¸…éœ€æ±‚" }
  ]
})
```

- ç”¨æˆ·é€‰æ‹©"è¿›å…¥ Phase 1.5" â†’
  1. **æŒä¹…åŒ–é˜¶æ®µä¸Šä¸‹æ–‡ï¼ˆå¿…é¡»ï¼‰**ï¼š
     ```
     phase_context_write phase=phase0 data={acceptance_criteria, constraints, risks, requirements_doc}
     phase_context_write phase=phase1 data={architecture, interfaces, adr, design_doc}
     phase_context_write phase=kb_context data={æœ¬é˜¶æ®µæ‰€æœ‰çŸ¥è¯†åº“æŸ¥è¯¢ç»“æœ}
     ```
  2. æ›´æ–° `task_status: REVIEWING`ï¼Œè°ƒç”¨ `axiom-review`
- ç”¨æˆ·é€‰æ‹©"éœ€è¦ä¿®æ”¹" â†’ é‡æ–°æ‰§è¡Œå¯¹åº”é˜¶æ®µ
- ç”¨æˆ·é€‰æ‹©"è¿”å·¥" â†’ æ¸…ç©ºæœ¬æ¬¡æ”¶é›†å†…å®¹ï¼Œé‡æ–°æ‰§è¡Œéœ€æ±‚æ”¶é›†

## éœ€æ±‚æ”¶é›†

å‘ç”¨æˆ·è¯¢é—®ä»¥ä¸‹ä¿¡æ¯ï¼š

| å­—æ®µ | æ˜¯å¦å¿…å¡« | è¯´æ˜ |
|------|----------|------|
| åŠŸèƒ½æè¿° | å¿…å¡« | è¦å®ç°ä»€ä¹ˆåŠŸèƒ½ |
| æŠ€æœ¯æ ˆåå¥½ | å¯é€‰ | è¯­è¨€ã€æ¡†æ¶ç­‰åå¥½ |
| éªŒæ”¶æ ‡å‡† | å¯é€‰ | æœªæä¾›æ—¶ç”± analyst è‡ªåŠ¨æ¨æ–­ |

## PRD å†™å…¥æ ¼å¼

åŒæ—¶å†™å…¥ä¸¤ä¸ªæ–‡ä»¶ï¼š

**1. `.agent/memory/project_decisions.md`ï¼ˆè¿½åŠ ï¼‰ï¼š**

```markdown
## PRD - {éœ€æ±‚æ ‡é¢˜}
ç”Ÿæˆæ—¶é—´ï¼š{timestamp}

### ç›®æ ‡
{åŠŸèƒ½æè¿°}

### ç”¨æˆ·æ•…äº‹
- ä½œä¸º {ç”¨æˆ·è§’è‰²}ï¼Œæˆ‘å¸Œæœ› {åŠŸèƒ½}ï¼Œä»¥ä¾¿ {ä»·å€¼}

### éªŒæ”¶æ ‡å‡†
- [ ] {æ ‡å‡†1}
- [ ] {æ ‡å‡†2}

### æŠ€æœ¯çº¦æŸ
{æŠ€æœ¯æ ˆåå¥½æˆ–"æ— ç‰¹æ®Šçº¦æŸ"}

### æ’é™¤èŒƒå›´
{æ˜ç¡®ä¸åšçš„å†…å®¹ï¼Œæˆ–"æ— "}

### æ¶æ„å†³ç­–
{phase1.adr}
```

**2. `.agent/memory/prd-{session_name}-{timestamp}.md`ï¼ˆæ–°å»ºï¼‰ï¼š**

å†…å®¹ä¸ä¸Šæ–¹ç›¸åŒï¼Œä½œä¸ºç‹¬ç«‹ PRD æ–‡ä»¶å­˜æ¡£ã€‚

## active_context å†™å…¥æ ¼å¼

```
task_status: DRAFTING
current_phase: Phase 1 - Drafting
last_gate: Gate 1
last_updated: {timestamp}
```
